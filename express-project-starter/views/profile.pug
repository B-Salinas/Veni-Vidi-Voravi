extends layout

append head
    link(rel="stylesheet" href="/stylesheets/profile.css")
    link(rel="stylesheet" href="/stylesheets/footer.css")
    link(rel="stylesheet" href="/stylesheets/story-navbar.css")
    script(type="text/javascript" src="/javascripts/follows.js")

block content
    .nav__container
        div(class="nav__logo")
            a(href="/")
                p LOGO HERE
        div(class="nav__title" id="nav__username") #{followedUser.firstName} #{followedUser.lastName}
        div
            if isFollowing
                button(class=`${userId} ${followedUserId} nav__follow-button nav__followed` type="submit") Following
            else    
                button(class=`${userId} ${followedUserId} nav__follow-button` type="submit") Follow
        div(class="nav__links")
            a(href="/our-story") Our Story
            a(href="/stories/create") Write a Story
            form(action="/users/logout" method="post")
                button(class="logout-button" type="submit") Log Out
            a(href=`/users/${user.id}`)
                img(class="profile-pic" src=`${user.profilePic}`)
            //- whoever is the logged in user, must have the picture here

    .profile__container
        .profile__user
            div
                img(class="profile-pic-main" src=`${followedUser.profilePic}`)
            div
                p.user__name #{followedUser.firstName} #{followedUser.lastName}
            div
                p.user__about #{followedUser.about}

        .profile__story
            each story in userStories
                div
                    div.story__title-div
                        a(href=`/stories/${story.id}`) #{story.title}
                        .story__button-div
                            .story__button-edit
                                a(href=`/stories/${story.id}/edit`) Edit
                            .story__button-delete
                                a(href=`/stories/${story.id}/delete`) Delete
                    .story__timestamp
                        if moment(currentDate).diff(story.createdAt, 'years') > 0
                            p #{`${moment(currentDate).diff(story.createdAt, 'years')} years ago`}
                        else if moment(currentDate).diff(story.createdAt, 'days') > 0
                            p #{`${moment(currentDate).diff(story.createdAt, 'days')} days ago`}
                        else if moment(currentDate).diff(story.createdAt, 'hours') > 0
                            p #{`${moment(currentDate).diff(story.createdAt, 'hours')} hours ago`}
                        else
                            p #{`${moment(currentDate).diff(story.createdAt, 'minutes')} minutes ago`}
                    div
                        a(href=`/stories/${story.id}`)
                            .story__image(style=`background-image: url('${story.imageSrc}')`)              
    include footer.pug
